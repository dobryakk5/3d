✓ Основная функция импортирована успешно
Запуск визуализации...
============================================================
СОЗДАНИЕ ВЕКТОРНОЙ ВИЗУАЛИЗАЦИИ НА ОСНОВЕ ПРОЕМОВ С АНАЛИЗОМ ТИПОВ JUNCTIONS
============================================================
Загрузка данных из: plan_floor1_objects.json
  ✓ Данные успешно загружены
  ✓ Толщина стен определена по минимальной толщине дверей: 22.0 px

============================================================
ОБРАБОТКА ПРОЕМОВ С УЧЕТОМ JUNCTIONS
============================================================
  ✓ Загружено 45 junctions
Обработка 13 проемов:
  ✓ Проем window_2 (horizontal): 2 сегментов
  ✓ Проем window_4 (horizontal): 2 сегментов
  ✓ Проем door_2 (horizontal): 2 сегментов
  ✓ Проем door_1 (horizontal): 2 сегментов
  ✓ Проем door_3 (horizontal): 2 сегментов
  ✓ Проем window_3 (vertical): 2 сегментов
  ✓ Проем window_5 (vertical): 2 сегментов
  ✓ Проем window_6 (vertical): 2 сегментов
  ✓ Проем window_7 (vertical): 2 сегментов
  ✓ Проем window_1 (horizontal): 2 сегментов
  ✓ Проем door_4 (vertical): 2 сегментов
  ✓ Проем door_5 (horizontal): 2 сегментов
  ✓ Проем door_6 (vertical): 2 сегментов

Всего создано 26 сегментов стен из 13 проемов

============================================================
АНАЛИЗ ТИПОВ JUNCTIONS С УЛУЧШЕННОЙ ЛОГИКОЙ
============================================================
  ✓ Загружено 45 junctions
Анализ типов 45 junctions с улучшенной логикой...
  Junction 1 (780.0, 618.0): тип=unknown (не внутри полигона)
  Junction 2 (614.0, 799.0): тип=L, направления=left, up
  Junction 3 (1081.0, 1092.0): тип=L, направления=left, up
  Junction 4 (2032.0, 1432.0): тип=unknown (не внутри полигона)
  Junction 5 (215.0, 975.0): тип=L, направления=right, up
  Junction 6 (787.0, 1092.0): тип=L, направления=right, up
  Junction 7 (215.0, 151.0): тип=L, направления=right, down
  Junction 8 (2033.0, 16.0): тип=unknown (не внутри полигона)
  Junction 9 (1081.0, 150.0): тип=L, направления=left, down
  Junction 10 (615.0, 617.0): тип=L, направления=left, down
  Junction 11 (414.0, 618.0): тип=T, направления=left, right, down
  Junction 12 (787.0, 977.0): тип=L, направления=left, down
  Junction 13 (417.0, 975.0): тип=T, направления=left, right, up
  Junction 14 (215.0, 616.0): тип=L, направления=right, up
  Junction 15 (415.0, 800.0): тип=T, направления=right, up, down
  Junction 16 (287.0, 150.0): тип=unknown, направления=left
  Junction 17 (718.0, 150.0): тип=unknown (не внутри полигона)
  Junction 18 (623.0, 151.0): тип=unknown (не внутри полигона)
  Junction 19 (280.0, 616.0): тип=unknown (не внутри полигона)
  Junction 20 (278.0, 978.0): тип=unknown (не внутри полигона)
  Junction 21 (623.0, 978.0): тип=unknown (не внутри полигона)
  Junction 22 (821.0, 1090.0): тип=unknown, направления=left
  Junction 23 (716.0, 150.0): тип=unknown (не внутри полигона)
  Junction 24 (806.0, 150.0): тип=unknown, направления=right
  Junction 25 (442.0, 151.0): тип=unknown, направления=right
  Junction 26 (348.0, 617.0): тип=unknown (не внутри полигона)
  Junction 27 (368.0, 976.0): тип=unknown (не внутри полигона)
  Junction 28 (754.0, 976.0): тип=unknown (не внутри полигона)
  Junction 29 (1046.0, 1091.0): тип=unknown, направления=right
  Junction 30 (216.0, 220.0): тип=unknown, направления=up
  Junction 31 (1081.0, 525.0): тип=unknown (не внутри полигона)
  Junction 32 (1081.0, 633.0): тип=unknown (не внутри полигона)
  Junction 33 (615.0, 657.0): тип=unknown, направления=up
  Junction 34 (216.0, 677.0): тип=unknown (не внутри полигона)
  Junction 35 (786.0, 812.0): тип=unknown (не внутри полигона)
  Junction 36 (216.0, 375.0): тип=unknown, направления=down
  Junction 37 (1080.0, 588.0): тип=unknown (не внутри полигона)
  Junction 38 (1080.0, 696.0): тип=unknown (не внутри полигона)
  Junction 39 (616.0, 727.0): тип=unknown (не внутри полигона)
  Junction 40 (216.0, 738.0): тип=unknown (не внутри полигона)
  Junction 41 (786.0, 903.0): тип=unknown, направления=down
  Junction 42 (2014.0, 1276.0): тип=unknown (не внутри полигона)
  Junction 43 (2016.0, 1280.0): тип=unknown (не внутри полигона)
  Junction 44 (2020.0, 1280.0): тип=unknown (не внутри полигона)
  Junction 45 (2017.0, 1347.0): тип=unknown (не внутри полигона)

Статистика типов junctions:
  unknown: 33
  L: 9
  T: 3

============================================================
ПОИСК JUNCTIONS НЕ СВЯЗАННЫХ С ПРОЕМАМИ И ДОСТРАИВАНИЕ СТЕН
============================================================

--- Итерация 1 ---
  ✓ Найдено 12 junctions для обработки
  Junction 2: существующие направления=['up'], требуемые=['left', 'up'], недостающие=['left']
    ✓ Создан сегмент от J2 до J15 в направлении left
  Junction 4: существующие направления=[], требуемые=[], недостающие=[]
  Junction 6: существующие направления=['right'], требуемые=['right', 'up'], недостающие=['up']
    ✓ Создан сегмент от J6 до J12 в направлении up
  Junction 8: существующие направления=[], требуемые=[], недостающие=[]
  Junction 10: существующие направления=['down'], требуемые=['left', 'down'], недостающие=['left']
    ✓ Создан сегмент от J10 до J11 в направлении left
  Junction 11: существующие направления=['left'], требуемые=['left', 'right', 'down'], недостающие=['right', 'down']
    ✓ Создан сегмент от J11 до J10 в направлении right
    ✓ Создан сегмент от J11 до J15 в направлении down
  Junction 13: существующие направления=['left', 'right'], требуемые=['left', 'right', 'up'], недостающие=['up']
    ✓ Создан сегмент от J13 до J15 в направлении up
  Junction 15: существующие направления=[], требуемые=['right', 'up', 'down'], недостающие=['right', 'up', 'down']
    ✓ Создан сегмент от J15 до J2 в направлении right
    ✓ Создан сегмент от J15 до J11 в направлении up
    ✓ Создан сегмент от J15 до J13 в направлении down
  Junction 42: существующие направления=[], требуемые=[], недостающие=[]
  Junction 43: существующие направления=[], требуемые=[], недостающие=[]
  Junction 44: существующие направления=[], требуемые=[], недостающие=[]
  Junction 45: существующие направления=[], требуемые=[], недостающие=[]

  ✓ Создано 9 новых сегментов стен для junctions не связанных с проемами
  ✓ Создано 9 новых сегментов стен на итерации 1

--- Итерация 2 ---
  ✓ Найдено 6 junctions для обработки
  Junction 4: существующие направления=[], требуемые=[], недостающие=[]
  Junction 8: существующие направления=[], требуемые=[], недостающие=[]
  Junction 42: существующие направления=[], требуемые=[], недостающие=[]
  Junction 43: существующие направления=[], требуемые=[], недостающие=[]
  Junction 44: существующие направления=[], требуемые=[], недостающие=[]
  Junction 45: существующие направления=[], требуемые=[], недостающие=[]

  ✓ Создано 0 новых сегментов стен для junctions не связанных с проемами
  ✓ Не удалось создать новые сегменты стен на этой итерации

============================================================
ОБРАБОТКА L-JUNCTIONS И РАСШИРЕНИЕ ОРИГИНАЛЬНЫХ СЕГМЕНТОВ
============================================================
  ✓ Найдено 9 L-junctions
  Обработка L-junction 2 (614.0, 799.0)
    ✓ Выбран сегмент для расширения: wall_door_6_bottom_39_to_2
    ✓ Оригинальные границы segment bbox: {'x': 603.5, 'y': 728.0, 'width': 22.0, 'height': 71.0, 'orientation': 'vertical'}
    → Шаг 1: Расширение до границы полигона...
    ✓ Выбран перпендикулярный сегмент: wall_junction_2_to_15_left
    → Шаг 2: Расширение до перпендикулярного сегмента...
    ✓ Сегмент wall_door_6_bottom_39_to_2 расширен вниз до 810.0
    ✓ После расширения до перпендикуляра: {'x': 603.5, 'y': 728.0, 'width': 22.0, 'height': 82.0, 'orientation': 'vertical'}
    ✓ Итог: Сегмент wall_door_6_bottom_39_to_2 расширен
      оригинал: {'x': 603.5, 'y': 728.0, 'width': 22.0, 'height': 71.0, 'orientation': 'vertical'}
      результат: {'x': 603.5, 'y': 728.0, 'width': 22.0, 'height': 82.0, 'orientation': 'vertical'}
  Обработка L-junction 3 (1081.0, 1092.0)
    ✓ Выбран сегмент для расширения: wall_window_7_bottom_38_to_3
    ✓ Оригинальные границы segment bbox: {'x': 1069.0, 'y': 695.0, 'width': 22.0, 'height': 397.0, 'orientation': 'vertical'}
    → Шаг 1: Расширение до границы полигона...
    ✓ Выбран перпендикулярный сегмент: wall_window_1_right_29_to_3
    → Шаг 2: Расширение до перпендикулярного сегмента...
    ✓ Сегмент wall_window_7_bottom_38_to_3 расширен вниз до 1103.0
    ✓ После расширения до перпендикуляра: {'x': 1069.0, 'y': 695.0, 'width': 22.0, 'height': 408.0, 'orientation': 'vertical'}
    ✓ Итог: Сегмент wall_window_7_bottom_38_to_3 расширен
      оригинал: {'x': 1069.0, 'y': 695.0, 'width': 22.0, 'height': 397.0, 'orientation': 'vertical'}
      результат: {'x': 1069.0, 'y': 695.0, 'width': 22.0, 'height': 408.0, 'orientation': 'vertical'}
  Обработка L-junction 5 (215.0, 975.0)
    ✓ Выбран сегмент для расширения: wall_door_3_left_20_to_5
    ✓ Оригинальные границы segment bbox: {'x': 215.0, 'y': 966.5, 'width': 62.0, 'height': 22.0, 'orientation': 'horizontal'}
    → Шаг 1: Расширение до границы полигона...
    ✓ Сегмент wall_door_3_left_20_to_5 расширен вправо до 279.0
    ✓ После расширения до границы полигона: {'x': 215.0, 'y': 966.5, 'width': 64.0, 'height': 22.0, 'orientation': 'horizontal'}
    ✓ Выбран перпендикулярный сегмент: wall_window_5_bottom_40_to_5
    → Шаг 2: Расширение до перпендикулярного сегмента...
    ✓ Сегмент wall_door_3_left_20_to_5 расширен влево до 204.5
    ✓ После расширения до перпендикуляра: {'x': 204.5, 'y': 966.5, 'width': 74.5, 'height': 22.0, 'orientation': 'horizontal'}
    ✓ Итог: Сегмент wall_door_3_left_20_to_5 расширен
      оригинал: {'x': 215.0, 'y': 966.5, 'width': 62.0, 'height': 22.0, 'orientation': 'horizontal'}
      результат: {'x': 204.5, 'y': 966.5, 'width': 74.5, 'height': 22.0, 'orientation': 'horizontal'}
  Обработка L-junction 6 (787.0, 1092.0)
    ✓ Выбран сегмент для расширения: wall_window_1_left_22_to_6
    ✓ Оригинальные границы segment bbox: {'x': 787.0, 'y': 1081.0, 'width': 33.0, 'height': 22.0, 'orientation': 'horizontal'}
    → Шаг 1: Расширение до границы полигона...
    ✓ Сегмент wall_window_1_left_22_to_6 расширен вправо до 821.125
    ✓ После расширения до границы полигона: {'x': 787.0, 'y': 1081.0, 'width': 34.125, 'height': 22.0, 'orientation': 'horizontal'}
    ✓ Выбран перпендикулярный сегмент: wall_junction_6_to_12_up
    → Шаг 2: Расширение до перпендикулярного сегмента...
    ✓ Сегмент wall_window_1_left_22_to_6 расширен влево до 776.0
    ✓ После расширения до перпендикуляра: {'x': 776.0, 'y': 1081.0, 'width': 45.125, 'height': 22.0, 'orientation': 'horizontal'}
    ✓ Итог: Сегмент wall_window_1_left_22_to_6 расширен
      оригинал: {'x': 787.0, 'y': 1081.0, 'width': 33.0, 'height': 22.0, 'orientation': 'horizontal'}
      результат: {'x': 776.0, 'y': 1081.0, 'width': 45.125, 'height': 22.0, 'orientation': 'horizontal'}
  Обработка L-junction 7 (215.0, 151.0)
    ✓ Выбран сегмент для расширения: wall_window_2_left_16_to_7
    ✓ Оригинальные границы segment bbox: {'x': 215.0, 'y': 139.0, 'width': 71.0, 'height': 22.0, 'orientation': 'horizontal'}
    → Шаг 1: Расширение до границы полигона...
    ✓ Сегмент wall_window_2_left_16_to_7 расширен вправо до 287.3333333333333
    ✓ После расширения до границы полигона: {'x': 215.0, 'y': 139.0, 'width': 72.33333333333331, 'height': 22.0, 'orientation': 'horizontal'}
    ✓ Выбран перпендикулярный сегмент: wall_window_3_top_30_to_7
    → Шаг 2: Расширение до перпендикулярного сегмента...
    ✓ Сегмент wall_window_2_left_16_to_7 расширен влево до 204.5
    ✓ После расширения до перпендикуляра: {'x': 204.5, 'y': 139.0, 'width': 82.83333333333331, 'height': 22.0, 'orientation': 'horizontal'}
    ✓ Итог: Сегмент wall_window_2_left_16_to_7 расширен
      оригинал: {'x': 215.0, 'y': 139.0, 'width': 71.0, 'height': 22.0, 'orientation': 'horizontal'}
      результат: {'x': 204.5, 'y': 139.0, 'width': 82.83333333333331, 'height': 22.0, 'orientation': 'horizontal'}
  Обработка L-junction 9 (1081.0, 150.0)
    ✓ Выбран сегмент для расширения: wall_door_2_right_24_to_9
    ✓ Оригинальные границы segment bbox: {'x': 807.0, 'y': 139.0, 'width': 274.0, 'height': 22.0, 'orientation': 'horizontal'}
    → Шаг 1: Расширение до границы полигона...
    ✓ Сегмент wall_door_2_right_24_to_9 расширен влево до 805.0
    ✓ После расширения до границы полигона: {'x': 805.0, 'y': 139.0, 'width': 276.0, 'height': 22.0, 'orientation': 'horizontal'}
    ✓ Выбран перпендикулярный сегмент: wall_window_6_top_31_to_9
    → Шаг 2: Расширение до перпендикулярного сегмента...
    ✓ Сегмент wall_door_2_right_24_to_9 расширен вправо до 1091.0
    ✓ После расширения до перпендикуляра: {'x': 805.0, 'y': 139.0, 'width': 286.0, 'height': 22.0, 'orientation': 'horizontal'}
    ✓ Итог: Сегмент wall_door_2_right_24_to_9 расширен
      оригинал: {'x': 807.0, 'y': 139.0, 'width': 274.0, 'height': 22.0, 'orientation': 'horizontal'}
      результат: {'x': 805.0, 'y': 139.0, 'width': 286.0, 'height': 22.0, 'orientation': 'horizontal'}
  Обработка L-junction 10 (615.0, 617.0)
    ✓ Выбран сегмент для расширения: wall_door_6_top_33_to_10
    ✓ Оригинальные границы segment bbox: {'x': 603.5, 'y': 617.0, 'width': 22.0, 'height': 40.0, 'orientation': 'vertical'}
    → Шаг 1: Расширение до границы полигона...
    DEBUG J10: extend_segment_to_polygon_edge called for wall_door_6_top_33_to_10
    DEBUG J10: segment bbox before={'x': 603.5, 'y': 617.0, 'width': 22.0, 'height': 40.0, 'orientation': 'vertical'}
    DEBUG J10: junction directions=['left', 'down']
    DEBUG J10: extend_direction=left
    DEBUG J10: intersections={'left': 349.1818181818182, 'right': 623.3589743589744, 'up': 606.0152671755725, 'down': 658.0}
    DEBUG J10: No extension performed
    ✓ Выбран перпендикулярный сегмент: wall_junction_10_to_11_left
    → Шаг 2: Расширение до перпендикулярного сегмента...
    DEBUG J10: segment=wall_door_6_top_33_to_10, perpendicular=wall_junction_10_to_11_left
    DEBUG J10: segment bbox={'x': 603.5, 'y': 617.0, 'width': 22.0, 'height': 40.0, 'orientation': 'vertical'}
    DEBUG J10: perpendicular bbox={'x': 414.0, 'y': 606.0, 'width': 201.0, 'height': 22.0, 'orientation': 'horizontal'}
    ✓ Сегмент wall_door_6_top_33_to_10 расширен вверх до 606.0
    DEBUG J10: bbox changed from {'x': 603.5, 'y': 617.0, 'width': 22.0, 'height': 40.0, 'orientation': 'vertical'} to {'x': 603.5, 'y': 606.0, 'width': 22.0, 'height': 51.0, 'orientation': 'vertical'}
    ✓ После расширения до перпендикуляра: {'x': 603.5, 'y': 606.0, 'width': 22.0, 'height': 51.0, 'orientation': 'vertical'}
    ✓ Итог: Сегмент wall_door_6_top_33_to_10 расширен
      оригинал: {'x': 603.5, 'y': 617.0, 'width': 22.0, 'height': 40.0, 'orientation': 'vertical'}
      результат: {'x': 603.5, 'y': 606.0, 'width': 22.0, 'height': 51.0, 'orientation': 'vertical'}
  Обработка L-junction 12 (787.0, 977.0)
    ✓ Выбран сегмент для расширения: wall_door_1_right_28_to_12
    ✓ Оригинальные границы segment bbox: {'x': 755.0, 'y': 966.5, 'width': 32.0, 'height': 22.0, 'orientation': 'horizontal'}
    → Шаг 1: Расширение до границы полигона...
    ✓ Сегмент wall_door_1_right_28_to_12 расширен влево до 756.0
    ✓ После расширения до границы полигона: {'x': 756.0, 'y': 966.5, 'width': 31.0, 'height': 22.0, 'orientation': 'horizontal'}
    ✓ Выбран перпендикулярный сегмент: wall_door_4_bottom_41_to_12
    → Шаг 2: Расширение до перпендикулярного сегмента...
    ✓ Сегмент wall_door_1_right_28_to_12 расширен вправо до 796.5
    ✓ После расширения до перпендикуляра: {'x': 756.0, 'y': 966.5, 'width': 40.5, 'height': 22.0, 'orientation': 'horizontal'}
    ✓ Итог: Сегмент wall_door_1_right_28_to_12 расширен
      оригинал: {'x': 755.0, 'y': 966.5, 'width': 32.0, 'height': 22.0, 'orientation': 'horizontal'}
      результат: {'x': 756.0, 'y': 966.5, 'width': 40.5, 'height': 22.0, 'orientation': 'horizontal'}
  Обработка L-junction 14 (215.0, 616.0)
    ✓ Выбран сегмент для расширения: wall_window_3_bottom_36_to_14
    ✓ Оригинальные границы segment bbox: {'x': 204.5, 'y': 375.0, 'width': 22.0, 'height': 241.0, 'orientation': 'vertical'}
    → Шаг 1: Расширение до границы полигона...
    ✓ Выбран перпендикулярный сегмент: wall_window_5_top_34_to_14
    → Шаг 2: Расширение до перпендикулярного сегмента...
    ✗ Сегмент wall_window_3_bottom_36_to_14 не был расширен
  ✓ Расширено 13 сегментов для L-junctions

============================================================
ВЫРАВНИВАНИЕ СТЕН ПО ПРОЕМАМ
============================================================
  Проверка на дубликаты сегментов:
    Сегменты из проемов: 26
    Сегменты из junctions: 9
  Начинаем выравнивание 26 сегментов из проемов и 9 сегментов из junctions
  ✓ Толщина стен определена по минимальной толщине дверей: 22.0 px
  ✓ Конвертировано 35 сегментов в единый формат
  ✓ Разделено на 18 горизонтальных и 17 вертикальных стен
  Обрабатываем горизонтальные стены...
  ✓ Найдено 5 групп горизонтальных стен
    Группа на Y=139.0: 6 стен
      Найдено 3 связанных проемов
    ✓ Стена wall_window_2_left_16_to_7: Y 139.0 -> 139.0 (по проему window_4)
    ✓ Стена wall_window_2_right_25_to_18: Y 139.0 -> 139.0 (по проему window_4)
    ✓ Стена wall_window_4_left_18_to_25: Y 139.0 -> 139.0 (по проему window_4)
    ✓ Стена wall_window_4_right_17_to_24: Y 139.0 -> 139.0 (по проему window_4)
    ✓ Стена wall_door_2_left_17_to_23: Y 139.0 -> 139.0 (по проему window_4)
    ✓ Стена wall_door_2_right_24_to_9: Y 139.0 -> 139.0 (по проему window_4)
    Группа на Y=966.5: 4 стен
      Найдено 2 связанных проемов
    ✓ Стена wall_door_1_left_21_to_13: Y 966.5 -> 966.5 (по проему door_3)
    ✓ Стена wall_door_1_right_28_to_12: Y 966.5 -> 966.5 (по проему door_3)
    ✓ Стена wall_door_3_left_20_to_5: Y 966.5 -> 966.5 (по проему door_3)
    ✓ Стена wall_door_3_right_27_to_13: Y 966.5 -> 966.5 (по проему door_3)
    Группа на Y=1081.0: 2 стен
      Найдено 1 связанных проемов
    ✓ Стена wall_window_1_left_22_to_6: Y 1081.0 -> 1081.0 (по проему window_1)
    ✓ Стена wall_window_1_right_29_to_3: Y 1081.0 -> 1081.0 (по проему window_1)
    Группа на Y=605.0: 4 стен
      Найдено 1 связанных проемов
    ✓ Стена wall_door_5_left_19_to_14: Y 605.0 -> 605.0 (по проему door_5)
    ✓ Стена wall_door_5_right_26_to_11: Y 605.0 -> 605.0 (по проему door_5)
    ✓ Стена wall_junction_10_to_11_left: Y 606.0 -> 605.0 (по проему door_5)
    ✓ Стена wall_junction_11_to_10_right: Y 607.0 -> 605.0 (по проему door_5)
    Группа на Y=788.0: 2 стен
      Найдено 0 связанных проемов
  Обрабатываем вертикальные стены...
  ✓ Найдено 5 групп вертикальных стен
    Группа на X=204.5: 4 стен
      Найдено 2 связанных проемов
    ✓ Стена wall_window_3_top_30_to_7: X 204.5 -> 204.5 (по проему window_5)
    ✓ Стена wall_window_3_bottom_36_to_14: X 204.5 -> 204.5 (по проему window_5)
    ✓ Стена wall_window_5_top_34_to_14: X 204.5 -> 204.5 (по проему window_5)
    ✓ Стена wall_window_5_bottom_40_to_5: X 204.5 -> 204.5 (по проему window_5)
    Группа на X=1069.0: 4 стен
      Найдено 2 связанных проемов
    ✓ Стена wall_window_6_top_31_to_9: X 1069.0 -> 1069.0 (по проему window_7)
    ✓ Стена wall_window_6_bottom_37_to_32: X 1069.0 -> 1069.0 (по проему window_7)
    ✓ Стена wall_window_7_top_32_to_37: X 1069.0 -> 1069.0 (по проему window_7)
    ✓ Стена wall_window_7_bottom_38_to_3: X 1069.0 -> 1069.0 (по проему window_7)
    Группа на X=774.5: 3 стен
      Найдено 1 связанных проемов
    ✓ Стена wall_door_4_top_35_to_1: X 774.5 -> 774.5 (по проему door_4)
    ✓ Стена wall_door_4_bottom_41_to_12: X 774.5 -> 774.5 (по проему door_4)
    ✓ Стена wall_junction_6_to_12_up: X 776.0 -> 774.5 (по проему door_4)
    Группа на X=603.5: 2 стен
      Найдено 1 связанных проемов
    ✓ Стена wall_door_6_top_33_to_10: X 603.5 -> 603.5 (по проему door_6)
    ✓ Стена wall_door_6_bottom_39_to_2: X 603.5 -> 603.5 (по проему door_6)
    Группа на X=403.0: 4 стен
      Найдено 0 связанных проемов
  ✓ Выравнивание завершено
  ✓ Выравнивание применено к 26 сегментам из проемов и 9 сегментам из junctions

============================================================
ИТОГО: 26 сегментов стен из проемов + 9 сегментов стен из junctions + 13 расширенных сегментов
Объединенный список для визуализации: 35 сегментов
============================================================
  Вычисление размеров SVG...
  ✓ Максимальные координаты: 2033.0x1432.0
  ✓ Масштабный коэффициент: 0.4126536369131574
  ✓ Обратный масштаб: 2.42333984375
  ✓ Размеры SVG: 2033.0x1432.0, масштаб: 2.42333984375
  ✓ Размеры SVG: 5026x3570
  ✓ SVG документ создан: 5026x3570
  ✓ Отрисовка 10 стеновых полигонов
  ✓ Отрисовка 45 junctions с типами
  ✓ Отрисовка 2 колонн как квадратов
  ✓ Используем толщину стены: 22.0 px
  ✓ Размер квадрата колонны: 53.31 px
    ✓ Колонна P1: центр(217.1, 1091.6) -> квадрат 53.31x53.31 px
    ✓ Колонна P2: центр(503.0, 1091.2) -> квадрат 53.31x53.31 px
  ✓ Отрисовка 7 окон и 6 дверей с толщиной 22.0 px
  ✓ Отрисовка 9 сегментов стен (junction-based)
  ✓ Отрисовка 26 сегментов стен (opening-based)
  ✓ Легенда добавлена
  ✓ Заголовок добавлен

✓ SVG файл сохранен: wall_polygons.svg

Статистика объектов:
  Полигоны стен: 10
  Сегменты стен из проемов: 26
  Сегменты стен из junctions: 9
  Расширенные сегменты: 13 (оригинальные сегменты увеличены)
  Выровненные стены: встроено в существующие сегменты
  Всего сегментов стен: 35
  Объединенный список для визуализации: 35
  Колонны: 2
  Окна: 7
  Двери: 6
  Junctions: 45
  Толщина стен (минимальная толщина двери): 22.0 px

Статистика по типам junctions:
  unknown: 33
  L: 9
  T: 3

Готово! Векторная визуализация с измененной логикой расширения сегментов создана: wall_polygons.svg
Откройте файл в браузере или векторном редакторе для просмотра
✓ SVG файл создан успешно: wall_polygons.svg (43708 байт)
