# Vector Overlay from JSON Objects

–≠—Ç–æ—Ç –Ω–∞–±–æ—Ä —Å–∫—Ä–∏–ø—Ç–æ–≤ —Å–æ–∑–¥–∞–µ—Ç –≤–µ–∫—Ç–æ—Ä–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –ø–ª–∞–Ω–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ JSON —Å –¥–µ—Ç–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏ –∏ –Ω–∞–∫–ª–∞–¥—ã–≤–∞–µ—Ç –µ–≥–æ –Ω–∞ —Ä–∞—Å—Ç—Ä–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–æ—á–Ω–æ—Å—Ç–∏.

## –§–∞–π–ª—ã

### –°–∫—Ä–∏–ø—Ç—ã

1. **`fix_json_objects.py`** - –ò—Å–ø—Ä–∞–≤–ª—è–µ—Ç JSON —Å –æ–±—ä–µ–∫—Ç–∞–º–∏:
   - –£–¥–∞–ª—è–µ—Ç –∫–æ–ª–æ–Ω–Ω—ã, –ø–µ—Ä–µ—Å–µ–∫–∞—é—â–∏–µ—Å—è —Å–æ —Å—Ç–µ–Ω–∞–º–∏, –¥–≤–µ—Ä—è–º–∏ –∏ –æ–∫–Ω–∞–º–∏
   - –û–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ `plan_floor1_objects_fixed.json`

2. **`create_correct_overlay.py`** - –°–æ–∑–¥–∞–µ—Ç SVG —Ñ–∞–π–ª—ã:
   - **Overlay SVG** - –≤–µ–∫—Ç–æ—Ä–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –ø–æ–≤–µ—Ä—Ö —Ä–∞—Å—Ç—Ä–æ–≤–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
   - **Pure Vector SVG** - —á–∏—Å—Ç–æ–µ –≤–µ–∫—Ç–æ—Ä–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –±–µ–∑ —Ä–∞—Å—Ç—Ä–∞

### –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

- `plan_floor1.jpg` - –†–∞—Å—Ç—Ä–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (4963x3509)
- `plan_floor1_objects.json` - JSON —Å –¥–µ—Ç–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏

### –í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

- `plan_floor1_objects_fixed.json` - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π JSON (—É–¥–∞–ª–µ–Ω—ã –ø–µ—Ä–µ—Å–µ–∫–∞—é—â–∏–µ—Å—è –∫–æ–ª–æ–Ω–Ω—ã)
- `plan_floor1_overlay_correct.svg` - –í–µ–∫—Ç–æ—Ä–Ω–∞—è –Ω–∞–∫–ª–∞–¥–∫–∞ –Ω–∞ —Ä–∞—Å—Ç—Ä
- `plan_floor1_vector_correct.svg` - –ß–∏—Å—Ç—ã–π –≤–µ–∫—Ç–æ—Ä

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```bash
# 1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å JSON (—É–¥–∞–ª–∏—Ç—å –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è)
python3 fix_json_objects.py

# 2. –°–æ–∑–¥–∞—Ç—å –≤–µ–∫—Ç–æ—Ä–Ω—ã–µ SVG
python3 create_correct_overlay.py
```

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

- JSON —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤ —É–º–µ–Ω—å—à–µ–Ω–Ω–æ–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ (scale_factor = 0.4127)
- Overlay SVG –∏—Å–ø–æ–ª—å–∑—É–µ—Ç inverse scale (2.4233) –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞ —Ä–∞—Å—Ç—Ä–µ
- –†–∞–∑–º–µ—Ä overlay = —Ä–∞–∑–º–µ—Ä—É —Ä–∞—Å—Ç—Ä–∞ (4963x3509)

### –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞ overlay

- üî¥ **–ö—Ä–∞—Å–Ω—ã–π** - —Å—Ç–µ–Ω—ã –∏–∑ hatching –¥–µ—Ç–µ–∫—Ü–∏–∏
- üü¢ **–ó–µ–ª–µ–Ω—ã–π** - —Å—Ç–µ–Ω—ã –∏–∑ DL –¥–µ—Ç–µ–∫—Ü–∏–∏
- üîµ **–¶–∏–∞–Ω** - –æ–∫–Ω–∞
- üü° **–ñ–µ–ª—Ç—ã–π** - –¥–≤–µ—Ä–∏
- üü£ **–ü—É—Ä–ø—É—Ä–Ω—ã–π** - –∫–æ–ª–æ–Ω–Ω—ã

### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∫–æ–ª–æ–Ω–Ω

–£–¥–∞–ª—è—é—Ç—Å—è –∫–æ–ª–æ–Ω–Ω—ã, –∫–æ—Ç–æ—Ä—ã–µ:
- –ü–µ—Ä–µ—Å–µ–∫–∞—é—Ç—Å—è —Å–æ —Å—Ç–µ–Ω–∞–º–∏ (tolerance=10px)
- –ü–µ—Ä–µ—Å–µ–∫–∞—é—Ç—Å—è —Å –¥–≤–µ—Ä—è–º–∏/–æ–∫–Ω–∞–º–∏ (tolerance=5px)

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –î–æ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
- –°—Ç–µ–Ω—ã: 30
- –û–∫–Ω–∞: 7
- –î–≤–µ—Ä–∏: 6
- **–ö–æ–ª–æ–Ω–Ω—ã: 12**

### –ü–æ—Å–ª–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
- –°—Ç–µ–Ω—ã: 30
- –û–∫–Ω–∞: 7
- –î–≤–µ—Ä–∏: 6
- **–ö–æ–ª–æ–Ω–Ω—ã: 5** (—É–¥–∞–ª–µ–Ω–æ 7 –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π)

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ—á–Ω–æ—Å—Ç–∏

–û—Ç–∫—Ä–æ–π—Ç–µ `plan_floor1_overlay_correct.svg` –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∏–ª–∏ –≤–µ–∫—Ç–æ—Ä–Ω–æ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ:
- –†–∞—Å—Ç—Ä –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–∞–∫ —Ñ–æ–Ω
- –í–µ–∫—Ç–æ—Ä–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –Ω–∞–ª–æ–∂–µ–Ω—ã –ø–æ–≤–µ—Ä—Ö —è—Ä–∫–∏–º–∏ —Ü–≤–µ—Ç–∞–º–∏
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–æ–≤ —Å —Ä–∞—Å—Ç—Ä–æ–≤—ã–º–∏ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ JSON

```json
{
  "metadata": {
    "source_image": "plan_floor1.jpg",
    "scale_factor": 0.4127,
    "wall_thickness": 0.2,
    "wall_height": 3.0,
    ...
  },
  "walls": [
    {
      "id": "wall_1",
      "start": {"x": 564.0, "y": 988.0},
      "end": {"x": 615.0, "y": 980.0},
      "thickness": 0.2,
      "height": 3.0,
      "source": "hatching"
    },
    ...
  ],
  "openings": [
    {
      "id": "window_1",
      "type": "window",
      "bbox": {"x": 820.0, "y": 1080.0, "width": 227.0, "height": 24.0},
      "wall_id": "wall_22",
      "height": 1.5,
      "sill_height": 1.0
    },
    ...
  ],
  "pillars": [
    {
      "id": "pillar_1",
      "bbox": {"x": 293.0, "y": 550.0, "width": 13.0, "height": 13.0},
      "height": 3.0,
      "area": 148.0
    },
    ...
  ]
}
```
