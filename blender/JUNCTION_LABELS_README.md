# Отображение номеров Junctions в Blender

## Обзор

Функция `create_junction_labels()` добавлена в скрипт `create_walls_2m.py` для отображения номеров junctions в виде 3D-текста над стенами. Это помогает визуально отследить привязку стен к junctions.

## Новые возможности

### ✅ Что добавлено:

1. **Отображение номеров junctions**: 3D-текст с номерами junctions позиционируется над стенами
2. **Настраиваемый параметр**: `show_junction_labels` для включения/выключения меток
3. **Автоматическое позиционирование**: Метки размещаются на высоте `wall_height + 0.5` метров
4. **Улучшенная видимость**: Белый цвет с эмиссией для лучшей видимости
5. **Удаление желтой контурной стены**: Убран лишний визуальный элемент

## Использование

### Базовое использование

```python
# Включить отображение номеров junctions (по умолчанию)
create_3d_walls_from_json(
    json_path="wall_coordinates.json",
    wall_height=3.0,
    show_junction_labels=True
)
```

### Отключение меток

```python
# Отключить отображение номеров junctions
create_3d_walls_from_json(
    json_path="wall_coordinates.json",
    wall_height=3.0,
    show_junction_labels=False
)
```

### Параметры функции

| Параметр | Тип | По умолчанию | Описание |
|----------|-----|-------------|----------|
| `json_path` | str | - | Путь к JSON файлу с координатами стен |
| `wall_height` | float | 2.0 | Высота стен в метрах |
| `export_obj` | bool | True | Экспортировать результат в OBJ файл |
| `clear_scene` | bool | True | Очищать сцену перед созданием стен |
| `brick_texture_path` | str | None | Путь к файлу текстуры кирпича |
| `render_isometric` | bool | False | Создавать изометрический рендер |
| `show_junction_labels` | bool | True | **Отображать номера junctions** |

## Визуальные характеристики меток

### Позиционирование
- **Высота**: `wall_height + 0.5` метров над уровнем пола
- **Координаты**: Точно над позициями junctions из JSON данных
- **Масштабирование**: Применяется тот же scale_factor, что и для стен

### Внешний вид
- **Цвет**: Белый с эмиссией для видимости в темных областях
- **Размер шрифта**: 0.3 единицы Blender
- **Выравнивание**: Центрированное по обеим осям
- **Материал**: Специальный материал с эмиссией для лучшей видимости

### Имена объектов
- **Формат**: `Junction_Label_{junction_id}`
- **Пример**: `Junction_Label_1`, `Junction_Label_2`, и т.д.

## Пример результата

При использовании с тестовыми данными `wall_coordinates.json`:

- **Создано меток**: 39 штук
- **Диапазон координат**: X (215.0-1081.0), Y (150.0-1092.0)
- **Типы junctions**: Various (door_left_corner, wall_junction_t, etc.)
- **Высота позиционирования**: 3.5 метров (при wall_height=3.0)

## Типы Junctions в данных

Скрипт поддерживает различные типы junctions:

- `wall_junction_3way` - Тройные соединения стен
- `door_left_corner` - Левые углы дверных проемов
- `door_right_corner` - Правые углы дверных проемов
- `window_left_corner` - Левые углы окон
- `window_right_corner` - Правые углы окон
- `wall_junction_t` - T-образные соединения
- `wall_junction_cross` - Перекрестия
- `wall_junction_l` - L-образные соединения
- `door_corner` - Углы дверей
- `wall_intersection` - Пересечения стен
- `wall_end` - Концы стен
- `door_frame` - Дверные рамы
- `window_frame` - Оконные рамы

## Тестирование

Для проверки функциональности используется тестовый скрипт:

```bash
cd blender
python test_junction_labels.py
```

Тест проверяет:
- ✓ Загрузку данных из JSON
- ✓ Корректность параметров функции
- ✓ Синтаксис кода
- ✓ Наличие всех необходимых изменений в коде

## Изменения в коде

### Добавленные параметры
- `show_junction_labels=True` в сигнатуре `create_3d_walls_from_json()`

### Добавленный код
```python
# Создаем метки с номерами junctions если включено
if show_junction_labels:
    print("Создание меток с номерами junctions...")
    junction_label_objects = create_junction_labels(junctions, scale_factor, wall_height_meters)
    print(f"Создано меток junctions: {len(junction_label_objects)}")
else:
    print("Отображение номеров junctions отключено")
```

### Удаленный код
- Функция `create_outline_wall()` полностью удалена
- Все вызовы контурной стены удалены из основного кода

## Советы по использованию

### Для отладки
Используйте `show_junction_labels=True` для визуальной отладки привязки стен к junctions.

### Для финального рендера
Можно отключить метки с `show_junction_labels=False`, если они не нужны в финальном изображении.

### Для анализа структуры
Метки помогают понять, какие junctions связаны с какими стенами, особенно полезно при сложной геометрии.

## Экспорт в OBJ

Все метки junctions включаются в экспорт OBJ файла вместе с другими объектами. Имена меток сохраняются в формате `Junction_Label_{id}`.

## Изометрический рендер

При включенном `render_isometric=True` метки junctions будут видны на изометрическом изображении, что помогает в документации и презентациях.

---

**Версия**: 1.0  
**Дата обновления**: 2025-10-22  
**Совместимость**: Blender 2.8+  