# Инвертирование координат в JSON файле

## Обзор

Скрипт `invert_json_coordinates_fixed.py` инвертирует X-координаты в JSON файле с координатами стен, чтобы избежать необходимости инвертировать координаты в коде при создании 3D модели.

## Отличия от оригинального скрипта

Исправленный скрипт добавляет инверсию X-координат для следующих элементов:
- **junctions** - точки соединения стен
- **building_outline** - контур здания
- **foundation** - фундамент здания

Оригинальный скрипт инвертировал только:
- wall_segments_from_openings
- wall_segments_from_junctions
- openings
- pillar_squares

## Проблема

В оригинальном скрипте `invert_json_coordinates.py` отсутствовала инверсия координат для junctions, что приводило к несоответствию позиций junctions и других элементов в 3D модели. Junctions оставались в исходных позициях, в то время как стены, проемы и другие элементы были инвертированы.

## Решение

Исправленный скрипт `invert_json_coordinates_fixed.py` добавляет инверсию X-координат для junctions и других элементов, обеспечивая согласованность всех элементов в 3D модели.

## Использование

```bash
cd blender
python invert_json_coordinates_fixed.py
```

## Результат

После выполнения скрипта:
1. Создается резервная копия исходного файла: `wall_coordinates.json.backup_before_invert_fixed`
2. Все X-координаты в JSON файле инвертируются относительно центра (X = max_x / 2)
3. Junctions теперь соответствуют позициям стен в SVG файле `plan_floor1_objects_with_junctions.svg`
4. Все элементы в 3D модели будут отображаться в правильных позициях

## Центр инверсии

Скрипт автоматически вычисляет центр инверсии на основе максимальной X-координаты среди всех элементов. Для текущего файла центр инверсии: X = 543.5

## Формула инверсии

Для каждого элемента с X-координатой:
```
new_x = 2 * center_x - old_x
```

Для элементов с шириной (стены, проемы, колонны):
```
new_x = 2 * center_x - old_x - width